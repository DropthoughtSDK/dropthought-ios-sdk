{"version":3,"sources":["EndScreen.js"],"names":["useBackForDismiss","onClose","backHandler","React","useCallback","EndScreen","error","surveyFeedback","survey","onSubmitSuccessCallback","onSubmitCallback","useEffect"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;;;AAKA,MAAMA,iBAAiB,GAAG,MAAM;AAC9B,QAAM;AAAEC,IAAAA;AAAF,MAAc,+BAApB;;AACA,QAAMC,WAAW,GAAGC,eAAMC,WAAN,CAAkB,MAAM;AAC1CH,IAAAA,OAAO;AACP,WAAO,IAAP;AACD,GAHmB,EAGjB,CAACA,OAAD,CAHiB,CAApB;;AAKA,6BAAeC,WAAf;AACD,CARD;AAUA;AACA;AACA;AACA;;;AACA,MAAMG,SAAS,GAAG,CAAC;AAAEC,EAAAA,KAAF;AAASC,EAAAA;AAAT,CAAD,KAA+B;AAC/C,QAAMC,MAAM,GAAG,wBAAf;AACA,QAAMC,uBAAuB,GAAG,8CAAhC;AACA,QAAMC,gBAAgB,GAAG,uCAAzB;;AAEAP,iBAAMQ,SAAN,CAAgB,MAAM;AACpB;AACA,QAAID,gBAAJ,EAAsB;AACpBA,MAAAA,gBAAgB,CAACH,cAAD,EAAiBD,KAAjB,CAAhB,CADoB,CAEpB;;AACA,UAAI,CAACA,KAAD,IAAUG,uBAAd,EAAuC;AACrCA,QAAAA,uBAAuB,CAACF,cAAD,CAAvB;AACD;AACF,KARmB,CASpB;AACA;AACA;;AACD,GAZD,EAYG,EAZH;;AAcAP,EAAAA,iBAAiB;AACjB,sBAAO,6BAAC,8BAAD;AAAiB,IAAA,MAAM,EAAEQ;AAAzB,IAAP;AACD,CArBD;;eAuBeH,S;AAEf;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","sourcesContent":["import React from 'react';\nimport { useBackHandler } from '@react-native-community/hooks';\nimport { EndScreenLayout } from '@dropthought/react-native-ui';\nimport { useSurvey, useSurveyContext } from '../contexts/survey';\nimport {\n  useOnSubmitSuccessCallback,\n  useOnSubmitCallback,\n} from '../contexts/custom-props';\n\nconst useBackForDismiss = () => {\n  const { onClose } = useSurveyContext();\n  const backHandler = React.useCallback(() => {\n    onClose();\n    return true;\n  }, [onClose]);\n\n  useBackHandler(backHandler);\n};\n\n/**\n * @type {React.FunctionComponent<ScreenProps>}\n * @param {ScreenProps} props\n */\nconst EndScreen = ({ error, surveyFeedback }) => {\n  const survey = useSurvey();\n  const onSubmitSuccessCallback = useOnSubmitSuccessCallback();\n  const onSubmitCallback = useOnSubmitCallback();\n\n  React.useEffect(() => {\n    // passing data to native, if error is undefined, null, 0, it means success\n    if (onSubmitCallback) {\n      onSubmitCallback(surveyFeedback, error);\n      // deprecate later\n      if (!error && onSubmitSuccessCallback) {\n        onSubmitSuccessCallback(surveyFeedback);\n      }\n    }\n    // if (surveyFeedback)\n    //     SurveyNativeBridge.onFeedbackResult(surveyFeedback, error || 0)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useBackForDismiss();\n  return <EndScreenLayout survey={survey} />;\n};\n\nexport default EndScreen;\n\n/**\n * @typedef {import('../../data').SurveyFeedback} SurveyFeedback\n */\n\n/**\n * @typedef {Object} ScreenProps\n * @property {Error=} error\n * @property {SurveyFeedback=} surveyFeedback\n */\n"]}