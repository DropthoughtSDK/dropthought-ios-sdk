{"version":3,"sources":["SurveyModal.js"],"names":["React","View","Modal","pick","omit","GlobalStyle","SDKEntry","ModalProps","SurveyModal","props","sdkProps","modalProps","flex1","SurveyModalOpenSurveyContext","createContext","undefined","useOpenSurvey","context","useContext","Error","SurveyModalContainer","children","onClose","visible","setVisible","useState","openSurveyProps","setOpenSurveyProps","openSurvey","useCallback","inputProps","onCloseSurveyHandler"],"mappings":";;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAASC,IAAT,EAAeC,KAAf,QAA4B,cAA5B;AACA,SAASC,IAAT,EAAeC,IAAf,QAA2B,OAA3B;AACA,SAASC,WAAT,QAA4B,8BAA5B;AACA,OAAOC,QAAP,MAAqB,YAArB;AAEA,MAAMC,UAAU,GAAG,CACjB,UADiB,EAEjB,eAFiB,EAGjB,aAHiB,EAIjB,SAJiB,EAKjB,gBALiB,EAMjB,QANiB,EAOjB,mBAPiB,EAQjB,uBARiB,EASjB,WATiB,EAUjB,qBAViB,EAWjB,qBAXiB,CAAnB;AAcA;AACA;AACA;;AACA,OAAO,SAASC,WAAT,CAAqBC,KAArB,EAA4B;AACjC,QAAMC,QAAQ,GAAGN,IAAI,CAACG,UAAD,EAAaE,KAAb,CAArB;AACA,QAAME,UAAU,GAAGR,IAAI,CAACI,UAAD,EAAaE,KAAb,CAAvB;AACA,sBACE,oBAAC,KAAD;AAAO,IAAA,iBAAiB,EAAC,gBAAzB;AAA0C,IAAA,WAAW;AAArD,KAA0DE,UAA1D,gBACE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEN,WAAW,CAACO;AAAzB,kBACE,oBAAC,QAAD,EAAcF,QAAd,CADF,CADF,CADF;AAOD;AAED;;AACA,OAAO,MAAMG,4BAA4B,gBAAGb,KAAK,CAACc,aAAN,CAC1C,MAAMC,SADoC,CAArC;AAIP,OAAO,MAAMC,aAAa,GAAG,MAAM;AACjC,QAAMC,OAAO,GAAGjB,KAAK,CAACkB,UAAN,CAAiBL,4BAAjB,CAAhB;;AACA,MAAII,OAAO,KAAKF,SAAhB,EAA2B;AACzB,UAAM,IAAII,KAAJ,CAAU,0DAAV,CAAN;AACD;;AAED,SAAOF,OAAP;AACD,CAPM;AASP;AACA;AACA;;AACA,OAAO,MAAMG,oBAAoB,GAAG,CAAC;AAAEC,EAAAA,QAAF;AAAYC,EAAAA,OAAZ;AAAqB,KAAGb;AAAxB,CAAD,KAAqC;AACvE,QAAM,CAACc,OAAD,EAAUC,UAAV,IAAwBxB,KAAK,CAACyB,QAAN,CAAe,KAAf,CAA9B;AAEA,QAAM,CAACC,eAAD,EAAkBC,kBAAlB,IAAwC3B,KAAK,CAACyB,QAAN,EAA9C;AAEA,QAAMG,UAAU,GAAG5B,KAAK,CAAC6B,WAAN,CACjB;AAAC;AAA6BC,EAAAA,UAA9B,KAA6C;AAC3CH,IAAAA,kBAAkB,CAACG,UAAD,CAAlB;AACAN,IAAAA,UAAU,CAAC,IAAD,CAAV;AACD,GAJgB,EAKjB,EALiB,CAAnB;AAQA,QAAMO,oBAAoB,GAAG/B,KAAK,CAAC6B,WAAN,CAAkB,MAAM;AACnDP,IAAAA,OAAO,IAAIA,OAAO,EAAlB;AACAE,IAAAA,UAAU,CAAC,KAAD,CAAV;AACD,GAH4B,EAG1B,CAACF,OAAD,CAH0B,CAA7B;AAKA,sBACE,oBAAC,4BAAD,CAA8B,QAA9B;AAAuC,IAAA,KAAK,EAAEM;AAA9C,KACGP,QADH,EAEGE,OAAO,gBACN,oBAAC,WAAD,eACMd,KADN,EAEMiB,eAFN;AAGE,IAAA,OAAO,EAAEH,OAHX;AAIE,IAAA,OAAO,EAAEQ;AAJX,KADM,GAOJ,IATN,CADF;AAaD,CA/BM;AAiCP;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;;AACA;AACA;AACA","sourcesContent":["import * as React from 'react';\nimport { View, Modal } from 'react-native';\nimport { pick, omit } from 'ramda';\nimport { GlobalStyle } from '@dropthought/react-native-ui';\nimport SDKEntry from './SDKEntry';\n\nconst ModalProps = [\n  'animated',\n  'animationType',\n  'transparent',\n  'visible',\n  'onRequestClose',\n  'onShow',\n  'presentationStyle',\n  'supportedOrientations',\n  'onDismiss',\n  'onOrientationChange',\n  'hardwareAccelerated',\n];\n\n/**\n * @param {SurveyModalProps & SDKEntryProps & ModalProps } props\n */\nexport function SurveyModal(props) {\n  const sdkProps = omit(ModalProps, props);\n  const modalProps = pick(ModalProps, props);\n  return (\n    <Modal presentationStyle=\"overFullScreen\" transparent {...modalProps}>\n      <View style={GlobalStyle.flex1}>\n        <SDKEntry {...sdkProps} />\n      </View>\n    </Modal>\n  );\n}\n\n/** @type {React.Context<(param: OpenSurveyProps=) => void>} */\nexport const SurveyModalOpenSurveyContext = React.createContext(\n  () => undefined\n);\n\nexport const useOpenSurvey = () => {\n  const context = React.useContext(SurveyModalOpenSurveyContext);\n  if (context === undefined) {\n    throw new Error('useOpenSurvey must be used within a SurveyModalContainer');\n  }\n\n  return context;\n};\n\n/**\n * @param {SurveyModalProps & SDKEntryProps & ModalProps } param0\n */\nexport const SurveyModalContainer = ({ children, onClose, ...props }) => {\n  const [visible, setVisible] = React.useState(false);\n\n  const [openSurveyProps, setOpenSurveyProps] = React.useState();\n\n  const openSurvey = React.useCallback(\n    (/** @type {SDKEntryProps} */ inputProps) => {\n      setOpenSurveyProps(inputProps);\n      setVisible(true);\n    },\n    []\n  );\n\n  const onCloseSurveyHandler = React.useCallback(() => {\n    onClose && onClose();\n    setVisible(false);\n  }, [onClose]);\n\n  return (\n    <SurveyModalOpenSurveyContext.Provider value={openSurvey}>\n      {children}\n      {visible ? (\n        <SurveyModal\n          {...props}\n          {...openSurveyProps}\n          visible={visible}\n          onClose={onCloseSurveyHandler}\n        />\n      ) : null}\n    </SurveyModalOpenSurveyContext.Provider>\n  );\n};\n\n/**\n * @typedef {import('./SDKEntry').SDKEntryProps} SDKEntryProps\n * @typedef {import('react-native').ModalProps} ModalProps\n */\n/**\n * @typedef {object} SurveyModalProps\n * @property {boolean} visible\n */\n/**\n * @typedef {SDKEntryProps & ModalProps} OpenSurveyProps\n */\n"]}